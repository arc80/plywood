library runtime {
    source_files {
        "ply-runtime"
    }
    include_directories {
        public "."
    }
    dependencies {
        public platform
    }
    link_libraries {
        if sys.target_platform == "windows" {
            "shell32.lib"
            "ws2_32.lib"
        } else if platform.name == "macos" {
            //find_mac_framework("CoreServices")
        } else {
            "-ldl"
        }
    }
    prebuild_step {
        preprocess_labels()
    }
}

library runtime_tests {
    link_objects_directly()
    source_files {
        "tests"
    }
    dependencies {
        public runtime
        public test
    }
}